From 95efdcfe175c25734777eb7fb9f4b5a5072c801c Mon Sep 17 00:00:00 2001
From: Radha Mohan Chintakuntla <radhac@marvell.com>
Date: Thu, 2 Apr 2020 17:40:44 -0700
Subject: [PATCH 514/767] misc: mrvl-loki: Use msix_cap instead of msi_cap

commit f3d877d659d0244e56d379a43d28748586a8fe4d from
git@git.assembla.com:cavium/WindRiver.linux.git

Change-Id: I1006220b1a28517d945ae56f2f5f4ec331e32396
Signed-off-by: Radha Mohan Chintakuntla <radhac@marvell.com>
Reviewed-on: https://sj1git1.cavium.com/26230
Reviewed-by: Sunil Kovvuri Goutham <Sunil.Goutham@cavium.com>
Tested-by: Sunil Kovvuri Goutham <Sunil.Goutham@cavium.com>
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/misc/mrvl-loki.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/drivers/misc/mrvl-loki.c b/drivers/misc/mrvl-loki.c
index e0dee349c65b..c2757f1fe4c2 100644
--- a/drivers/misc/mrvl-loki.c
+++ b/drivers/misc/mrvl-loki.c
@@ -87,11 +87,12 @@ static irqreturn_t mrvl_loki_handler(int irq, void *dev)
 
 static inline void msix_enable_ctrl(struct pci_dev *dev)
 {
+	u32 ret;
 	u16 control;
 
-	pci_read_config_word(dev, dev->msi_cap + PCI_MSIX_FLAGS, &control);
+	ret = pci_read_config_word(dev, dev->msix_cap + PCI_MSIX_FLAGS, &control);
 	control |= PCI_MSIX_FLAGS_ENABLE;
-	pci_write_config_word(dev, dev->msi_cap + PCI_MSIX_FLAGS, control);
+	ret = pci_write_config_word(dev, dev->msix_cap + PCI_MSIX_FLAGS, control);
 }
 
 static int mrvl_loki_probe(struct platform_device *pdev)
-- 
2.31.1

