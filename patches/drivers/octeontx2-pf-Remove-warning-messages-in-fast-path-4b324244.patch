From 407c69a0421770cbf96cec413dd73550f859e87f Mon Sep 17 00:00:00 2001
From: Geetha sowjanya <gakula@marvell.com>
Date: Thu, 7 Nov 2019 11:30:33 +0530
Subject: [PATCH 0327/1921] octeontx2-pf: Remove warning messages in fast path

Change-Id: I0bf0176bf6cd32f3a0b4c7963836b848747d626e
Signed-off-by: Geetha sowjanya <gakula@marvell.com>
Reviewed-on: https://sj1git1.cavium.com/19129
Tested-by: sa_ip-sw-jenkins <sa_ip-sw-jenkins@marvell.com>
Reviewed-by: Sunil Kovvuri Goutham <Sunil.Goutham@cavium.com>
[WK: The original patch got from Marvell sdk11.21.09]
Signed-off-by: Wenlin Kang <wenlin.kang@windriver.com>
---
 drivers/net/ethernet/marvell/octeontx2/nic/otx2_pf.c   | 4 ----
 drivers/net/ethernet/marvell/octeontx2/nic/otx2_txrx.c | 6 +-----
 2 files changed, 1 insertion(+), 9 deletions(-)

diff --git a/drivers/net/ethernet/marvell/octeontx2/nic/otx2_pf.c b/drivers/net/ethernet/marvell/octeontx2/nic/otx2_pf.c
index af0f05896372..ed8ccd87da97 100644
--- a/drivers/net/ethernet/marvell/octeontx2/nic/otx2_pf.c
+++ b/drivers/net/ethernet/marvell/octeontx2/nic/otx2_pf.c
@@ -1497,10 +1497,6 @@ static netdev_tx_t otx2_xmit(struct sk_buff *skb, struct net_device *netdev)
 		if (((sq->num_sqbs - *sq->aura_fc_addr) * sq->sqe_per_sqb)
 							> sq->sqe_thresh)
 			netif_tx_wake_queue(txq);
-		else
-			netdev_warn(netdev,
-				    "%s: Transmit ring full, stopping SQ%d\n",
-				     netdev->name, qidx);
 
 		return NETDEV_TX_BUSY;
 	}
diff --git a/drivers/net/ethernet/marvell/octeontx2/nic/otx2_txrx.c b/drivers/net/ethernet/marvell/octeontx2/nic/otx2_txrx.c
index 753931a24c29..6c1a1ef96fbc 100644
--- a/drivers/net/ethernet/marvell/octeontx2/nic/otx2_txrx.c
+++ b/drivers/net/ethernet/marvell/octeontx2/nic/otx2_txrx.c
@@ -905,7 +905,7 @@ bool otx2_sq_append_skb(struct net_device *netdev, struct otx2_snd_queue *sq,
 
 	if (free_sqe < sq->sqe_thresh ||
 	    free_sqe < otx2_get_sqe_count(pfvf, skb))
-		goto fail;
+		return false;
 
 	num_segs = skb_shinfo(skb)->nr_frags + 1;
 
@@ -955,10 +955,6 @@ bool otx2_sq_append_skb(struct net_device *netdev, struct otx2_snd_queue *sq,
 	otx2_sqe_flush(sq, offset);
 
 	return true;
-fail:
-	netdev_warn(pfvf->netdev, "SQ%d full, SQB count %d Aura count %lld\n",
-		    qidx, sq->num_sqbs, *sq->aura_fc_addr);
-	return false;
 }
 EXPORT_SYMBOL(otx2_sq_append_skb);
 
-- 
2.31.1

