From b5c2589b3e219c2f9b58817924cfae8fac3047ed Mon Sep 17 00:00:00 2001
From: Vishal Sagar <vishal.sagar@xilinx.com>
Date: Thu, 8 Feb 2018 15:19:51 +0530
Subject: [PATCH 0258/1851] v4l: xilinx: sdirxss: Update Video lockout Window
 to 32 bit

commit 1fae048d3fe45776212da805b3a70759cf06f8ec from
https://github.com/Xilinx/linux-xlnx.git

Updated for 32 bit video lockout window.

Signed-off-by: Vishal Sagar <vishal.sagar@xilinx.com>
Reviewed-by: Hyun Kwon <hyun.kwon@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
State: pending
Signed-off-by: Yaliang Wang <Yaliang.Wang@windriver.com>
---
 drivers/media/platform/xilinx/xilinx-sdirxss.c | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

diff --git a/drivers/media/platform/xilinx/xilinx-sdirxss.c b/drivers/media/platform/xilinx/xilinx-sdirxss.c
index 5e0d09ca2f69..41c4a2360e1f 100644
--- a/drivers/media/platform/xilinx/xilinx-sdirxss.c
+++ b/drivers/media/platform/xilinx/xilinx-sdirxss.c
@@ -170,8 +170,6 @@
 #define XSDIRX_STAT_SB_RX_TDATA_GT_RESETDONE_MASK	BIT(2)
 #define XSDIRX_STAT_SB_RX_TDATA_GT_BITRATE_MASK		BIT(3)
 
-#define XSDIRX_VID_LOCK_WINDOW_VAL_MASK			GENMASK(15, 0)
-
 /* Number of media pads */
 #define XSDIRX_MEDIA_PADS	(1)
 
@@ -462,8 +460,7 @@ static void xsdirx_setvidlockwindow(struct xsdirxss_core *core, u32 val)
 	 * the mode and transport stream should be locked to get the
 	 * video lock interrupt.
 	 */
-	xsdirxss_write(core, XSDIRX_VID_LOCK_WINDOW_REG,
-		       val & XSDIRX_VID_LOCK_WINDOW_VAL_MASK);
+	xsdirxss_write(core, XSDIRX_VID_LOCK_WINDOW_REG, val);
 }
 
 static void xsdirx_disableintr(struct xsdirxss_core *core, u32 mask)
@@ -1415,7 +1412,7 @@ static struct v4l2_ctrl_config xsdirxss_ctrls[] = {
 		.name	= "SDI Rx : Video Lock Window",
 		.type	= V4L2_CTRL_TYPE_INTEGER,
 		.min	= 0,
-		.max	= 0xFFFF,
+		.max	= 0xFFFFFFFF,
 		.step	= 1,
 		.def	= XSDIRX_DEFAULT_VIDEO_LOCK_WINDOW,
 	}, {
-- 
2.31.1

