From 287cbf5dc20a07664e88c40982528fdcf8ed2649 Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Tue, 3 Dec 2019 01:03:44 -0800
Subject: [PATCH 0059/1851] firmware: xilinx: Add ULPI reset support

commit df1f6fd6c9cc18dd883b8006bb4a16e1067872ed from
https://github.com/Xilinx/linux-xlnx.git

Add missing IOCTLs for ULPI reset.

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Rajan Vaja <rajan.vaja@xilinx.com>
State: pending
Signed-off-by: Yaliang Wang <Yaliang.Wang@windriver.com>
---
 drivers/firmware/xilinx/zynqmp.c     | 1 +
 include/linux/firmware/xlnx-zynqmp.h | 4 +++-
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/drivers/firmware/xilinx/zynqmp.c b/drivers/firmware/xilinx/zynqmp.c
index 2bfe314fea1d..afd5281aea50 100644
--- a/drivers/firmware/xilinx/zynqmp.c
+++ b/drivers/firmware/xilinx/zynqmp.c
@@ -522,6 +522,7 @@ static inline int zynqmp_is_valid_ioctl(u32 ioctl_id)
 	case IOCTL_READ_GGS:
 	case IOCTL_WRITE_PGGS:
 	case IOCTL_READ_PGGS:
+	case IOCTL_ULPI_RESET:
 	case IOCTL_AFI:
 		return 1;
 	default:
diff --git a/include/linux/firmware/xlnx-zynqmp.h b/include/linux/firmware/xlnx-zynqmp.h
index 1349a0dcc47c..470bd5c28062 100644
--- a/include/linux/firmware/xlnx-zynqmp.h
+++ b/include/linux/firmware/xlnx-zynqmp.h
@@ -152,7 +152,9 @@ enum pm_ioctl_id {
 	IOCTL_READ_GGS,
 	IOCTL_WRITE_PGGS,
 	IOCTL_READ_PGGS,
-	IOCTL_AFI = 16,
+	/* IOCTL for ULPI reset */
+	IOCTL_ULPI_RESET,
+	IOCTL_AFI,
 };
 
 enum pm_query_id {
-- 
2.31.1

