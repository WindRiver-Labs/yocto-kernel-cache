From ad39b73f60d2e70676534482ba1d0077c1b14c73 Mon Sep 17 00:00:00 2001
From: Dinh Nguyen <dinh.nguyen@intel.com>
Date: Tue, 2 Feb 2021 15:13:24 -0800
Subject: [PATCH 06/41] arm64: dts: n5x: Add gmac entry

commit 98e1b3fbc02d558b88fa7185f236a87a1169b4c1 from
https://github.com/altera-opensource/linux-socfpga.git
branch is socfpga-5.4.114-lts

Add the gmac ethernet node.

Signed-off-by: Dinh Nguyen <dinh.nguyen@intel.com>
Integrated-by: Abhishek Paliwal <paliwal.abhishek@windriver.com>
---
 .../boot/dts/intel/socfpga_n5x_socdk.dts      | 30 +++++++++++++++++++
 1 file changed, 30 insertions(+)

diff --git a/arch/arm64/boot/dts/intel/socfpga_n5x_socdk.dts b/arch/arm64/boot/dts/intel/socfpga_n5x_socdk.dts
index 5f56e2697fee..32ad5adbb494 100644
--- a/arch/arm64/boot/dts/intel/socfpga_n5x_socdk.dts
+++ b/arch/arm64/boot/dts/intel/socfpga_n5x_socdk.dts
@@ -44,6 +44,36 @@
 	bus-width = <4>;
 };
 
+&gmac0 {
+        status = "okay";
+        phy-mode = "rgmii";
+        phy-handle = <&phy0>;
+
+        max-frame-size = <9000>;
+
+        mdio0 {
+                #address-cells = <1>;
+                #size-cells = <0>;
+                compatible = "snps,dwmac-mdio";
+                phy0: ethernet-phy@0 {
+                        reg = <4>;
+
+                        txd0-skew-ps = <0>; /* -420ps */
+                        txd1-skew-ps = <0>; /* -420ps */
+                        txd2-skew-ps = <0>; /* -420ps */
+                        txd3-skew-ps = <0>; /* -420ps */
+                        rxd0-skew-ps = <420>; /* 0ps */
+                        rxd1-skew-ps = <420>; /* 0ps */
+                        rxd2-skew-ps = <420>; /* 0ps */
+                        rxd3-skew-ps = <420>; /* 0ps */
+                        txen-skew-ps = <0>; /* -420ps */
+                        txc-skew-ps = <900>; /* 0ps */
+                        rxdv-skew-ps = <420>; /* 0ps */
+                        rxc-skew-ps = <1680>; /* 780ps */
+                };
+        };
+};
+
 &uart0 {
 	status = "okay";
 };
-- 
2.18.1

