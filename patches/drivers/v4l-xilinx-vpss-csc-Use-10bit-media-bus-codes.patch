From aec127ac887888b738689c2659c3a9fa9cd740f6 Mon Sep 17 00:00:00 2001
From: Satish Kumar Nagireddy <satish.nagireddy.nagireddy@xilinx.com>
Date: Tue, 26 Mar 2019 11:26:31 -0700
Subject: [PATCH 0582/1852] v4l: xilinx: vpss-csc: Use 10bit media bus codes

commit 8c6b67196917021c3479b90da05d33c0544372fe from
https://github.com/Xilinx/linux-xlnx.git

This patch enables driver to use new YUV 10bit media bus codes.

Signed-off-by: Satish Kumar Nagireddy <satish.nagireddy.nagireddy@xilinx.com>
Reviewed-by: Hyun Kwon <hyun.kwon@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
State: pending
Signed-off-by: Yaliang Wang <Yaliang.Wang@windriver.com>
---
 drivers/media/platform/xilinx/xilinx-vpss-csc.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/drivers/media/platform/xilinx/xilinx-vpss-csc.c b/drivers/media/platform/xilinx/xilinx-vpss-csc.c
index 0d8da2f7be27..2c79b6ec1b8b 100644
--- a/drivers/media/platform/xilinx/xilinx-vpss-csc.c
+++ b/drivers/media/platform/xilinx/xilinx-vpss-csc.c
@@ -458,18 +458,22 @@ static int xcsc_update_formats(struct xcsc_dev *xcsc)
 
 	switch (color_in) {
 	case MEDIA_BUS_FMT_RBG888_1X24:
+	case MEDIA_BUS_FMT_RBG101010_1X30:
 		dev_dbg(xcsc->xvip.dev, "Media Format In : RGB");
 		xcsc->cft_in = XVIDC_CSF_RGB;
 		break;
 	case MEDIA_BUS_FMT_VUY8_1X24:
+	case MEDIA_BUS_FMT_VUY10_1X30:
 		dev_dbg(xcsc->xvip.dev, "Media Format In : YUV 444");
 		xcsc->cft_in = XVIDC_CSF_YCRCB_444;
 		break;
 	case MEDIA_BUS_FMT_UYVY8_1X16:
+	case MEDIA_BUS_FMT_UYVY10_1X20:
 		dev_dbg(xcsc->xvip.dev, "Media Format In : YUV 422");
 		xcsc->cft_in = XVIDC_CSF_YCRCB_422;
 		break;
 	case MEDIA_BUS_FMT_VYYUYY8_1X24:
+	case MEDIA_BUS_FMT_VYYUYY10_4X20:
 		dev_dbg(xcsc->xvip.dev, "Media Format In : YUV 420");
 		xcsc->cft_in = XVIDC_CSF_YCRCB_420;
 		break;
@@ -477,6 +481,7 @@ static int xcsc_update_formats(struct xcsc_dev *xcsc)
 
 	switch (color_out) {
 	case MEDIA_BUS_FMT_RBG888_1X24:
+	case MEDIA_BUS_FMT_RBG101010_1X30:
 		xcsc->cft_out = XVIDC_CSF_RGB;
 		dev_dbg(xcsc->xvip.dev, "Media Format Out : RGB");
 		if (color_in != MEDIA_BUS_FMT_RBG888_1X24)
@@ -485,6 +490,7 @@ static int xcsc_update_formats(struct xcsc_dev *xcsc)
 			xcsc_set_unity_matrix(xcsc);
 		break;
 	case MEDIA_BUS_FMT_VUY8_1X24:
+	case MEDIA_BUS_FMT_VUY10_1X30:
 		xcsc->cft_out = XVIDC_CSF_YCRCB_444;
 		dev_dbg(xcsc->xvip.dev, "Media Format Out : YUV 444");
 		if (color_in == MEDIA_BUS_FMT_RBG888_1X24)
@@ -493,6 +499,7 @@ static int xcsc_update_formats(struct xcsc_dev *xcsc)
 			xcsc_set_unity_matrix(xcsc);
 		break;
 	case MEDIA_BUS_FMT_UYVY8_1X16:
+	case MEDIA_BUS_FMT_UYVY10_1X20:
 		xcsc->cft_out = XVIDC_CSF_YCRCB_422;
 		dev_dbg(xcsc->xvip.dev, "Media Format Out : YUV 422");
 		if (color_in == MEDIA_BUS_FMT_RBG888_1X24)
@@ -501,6 +508,7 @@ static int xcsc_update_formats(struct xcsc_dev *xcsc)
 			xcsc_set_unity_matrix(xcsc);
 		break;
 	case MEDIA_BUS_FMT_VYYUYY8_1X24:
+	case MEDIA_BUS_FMT_VYYUYY10_4X20:
 		xcsc->cft_out = XVIDC_CSF_YCRCB_420;
 		dev_dbg(xcsc->xvip.dev, "Media Format Out : YUV 420");
 		if (color_in ==  MEDIA_BUS_FMT_RBG888_1X24)
@@ -781,6 +789,9 @@ static int xcsc_set_format(struct v4l2_subdev *subdev,
 	case MEDIA_BUS_FMT_RBG888_1X24:
 	case MEDIA_BUS_FMT_UYVY8_1X16:
 	case MEDIA_BUS_FMT_VYYUYY8_1X24:
+	case MEDIA_BUS_FMT_VYYUYY10_4X20:
+	case MEDIA_BUS_FMT_UYVY10_1X20:
+	case MEDIA_BUS_FMT_VUY10_1X30:
 		break;
 	default:
 		/* Unsupported Format. Default to RGB */
-- 
2.31.1

