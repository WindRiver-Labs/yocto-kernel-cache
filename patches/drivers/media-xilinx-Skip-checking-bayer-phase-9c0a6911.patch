From 0c248374edd37d7c7a319365d90fefc9dea646e1 Mon Sep 17 00:00:00 2001
From: Radhey Shyam Pandey <radhey.shyam.pandey@xilinx.com>
Date: Tue, 1 Dec 2015 15:50:15 +0530
Subject: [PATCH 0203/1851] media: xilinx: Skip checking bayer phase

commit 9d6aa0f49edc47958b1e6952146b60641c62df20 from
https://github.com/Xilinx/linux-xlnx.git

In TPG v7.0 skip checking bayer phase state.

Signed-off-by: Radhey Shyam Pandey <radhey.shyam.pandey@xilinx.com>
Reviewed-by: Hyun Kwon <hyun.kwon@xilinx.com>
Tested-by: Christian Kohn <christian.kohn@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
State: pending
Signed-off-by: Yaliang Wang <Yaliang.Wang@windriver.com>
---
 drivers/media/platform/xilinx/xilinx-tpg.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/drivers/media/platform/xilinx/xilinx-tpg.c b/drivers/media/platform/xilinx/xilinx-tpg.c
index 4e8c1718b601..a043e6ba0ae8 100644
--- a/drivers/media/platform/xilinx/xilinx-tpg.c
+++ b/drivers/media/platform/xilinx/xilinx-tpg.c
@@ -993,9 +993,11 @@ static int xtpg_probe(struct platform_device *pdev)
 		xvip_get_frame_size(&xtpg->xvip, &xtpg->default_format);
 	}
 
-	bayer_phase = xtpg_get_bayer_phase(xtpg->vip_format->code);
-	if (!xtpg->is_hls && bayer_phase != XTPG_BAYER_PHASE_OFF)
-		xtpg->bayer = true;
+	if (!xtpg->is_hls) {
+		bayer_phase = xtpg_get_bayer_phase(xtpg->vip_format->code);
+		if (bayer_phase != XTPG_BAYER_PHASE_OFF)
+			xtpg->bayer = true;
+	}
 
 	xtpg->formats[0] = xtpg->default_format;
 	if (xtpg->npads == 2)
-- 
2.31.1

