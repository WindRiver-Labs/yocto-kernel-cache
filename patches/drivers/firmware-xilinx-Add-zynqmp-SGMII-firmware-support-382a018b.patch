From 525e6d646f78a32938055ee15805be89f617b4e2 Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Tue, 3 Dec 2019 01:03:45 -0800
Subject: [PATCH 0060/1851] firmware: xilinx: Add zynqmp SGMII firmware support

commit d8c9da2daaa5730a0a376756575c21c8e520319e from
https://github.com/Xilinx/linux-xlnx.git

firmware interface.

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Rajan Vaja <rajan.vaja@xilinx.com>
State: pending
Signed-off-by: Yaliang Wang <Yaliang.Wang@windriver.com>
---
 drivers/firmware/xilinx/zynqmp.c     | 1 +
 include/linux/firmware/xlnx-zynqmp.h | 6 ++++++
 2 files changed, 7 insertions(+)

diff --git a/drivers/firmware/xilinx/zynqmp.c b/drivers/firmware/xilinx/zynqmp.c
index afd5281aea50..6dec2cd3e966 100644
--- a/drivers/firmware/xilinx/zynqmp.c
+++ b/drivers/firmware/xilinx/zynqmp.c
@@ -518,6 +518,7 @@ static inline int zynqmp_is_valid_ioctl(u32 ioctl_id)
 	case IOCTL_GET_PLL_FRAC_MODE:
 	case IOCTL_SET_PLL_FRAC_DATA:
 	case IOCTL_GET_PLL_FRAC_DATA:
+	case IOCTL_SET_SGMII_MODE:
 	case IOCTL_WRITE_GGS:
 	case IOCTL_READ_GGS:
 	case IOCTL_WRITE_PGGS:
diff --git a/include/linux/firmware/xlnx-zynqmp.h b/include/linux/firmware/xlnx-zynqmp.h
index 470bd5c28062..abf070541642 100644
--- a/include/linux/firmware/xlnx-zynqmp.h
+++ b/include/linux/firmware/xlnx-zynqmp.h
@@ -144,6 +144,7 @@ enum pm_ret_status {
 
 enum pm_ioctl_id {
 	IOCTL_GET_RPU_OPER_MODE,
+	IOCTL_SET_SGMII_MODE = 5,
 	IOCTL_SET_PLL_FRAC_MODE = 8,
 	IOCTL_GET_PLL_FRAC_MODE,
 	IOCTL_SET_PLL_FRAC_DATA,
@@ -373,6 +374,11 @@ enum pm_pinctrl_tri_state {
 	PM_PINCTRL_TRI_STATE_ENABLE,
 };
 
+enum sgmii_mode {
+	PM_SGMII_DISABLE,
+	PM_SGMII_ENABLE,
+};
+
 enum pm_register_access_id {
 	CONFIG_REG_WRITE,
 	CONFIG_REG_READ,
-- 
2.31.1

