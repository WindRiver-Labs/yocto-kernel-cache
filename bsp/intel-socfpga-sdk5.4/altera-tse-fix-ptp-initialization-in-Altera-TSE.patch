From 27bed54cd9701cd9adae27cb09f5b38ee69986d1 Mon Sep 17 00:00:00 2001
From: "Ooi, Joyce" <joyce.ooi@intel.com>
Date: Fri, 20 Dec 2019 15:33:22 +0800
Subject: [PATCH 130/151] altera tse: fix ptp initialization in Altera TSE

commit  51acae4660a9c79ecdeb84439027a4ab0d6dd784 from
https://github.com/altera-opensource/linux-socfpga.git
branch is socfpga-5.4.64-lts

Signed-off-by: Ooi, Joyce <joyce.ooi@intel.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
Integrated-by: Jun Zhang <jun.zhang@windriver.com>
---
 drivers/net/ethernet/altera/altera_tse_main.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/net/ethernet/altera/altera_tse_main.c b/drivers/net/ethernet/altera/altera_tse_main.c
index 6025c59653c0..cf0ae5a4db28 100644
--- a/drivers/net/ethernet/altera/altera_tse_main.c
+++ b/drivers/net/ethernet/altera/altera_tse_main.c
@@ -1477,6 +1477,7 @@ static int altera_tse_probe(struct platform_device *pdev)
 	priv->dma_priv.device = &pdev->dev;
 	priv->dev = ndev;
 	priv->dma_priv.dev = ndev;
+	priv->ptp_priv.dev = ndev;
 	priv->msg_enable = netif_msg_init(debug, default_msg_level);
 	priv->dma_priv.msg_enable = netif_msg_init(debug, default_msg_level);
 
-- 
2.26.1

