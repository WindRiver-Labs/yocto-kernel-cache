From fb7367a72b95ef78f622c0ee8ef125b82e4823ae Mon Sep 17 00:00:00 2001
From: Richard Gong <richard.gong@intel.com>
Date: Tue, 7 Jul 2020 11:00:10 -0500
Subject: [PATCH 095/151] crypto: set intel_fcs task as uninterruptible

commit  4413805c09433cb75f1a70b4fb21d1a5169d3d23 from
https://github.com/altera-opensource/linux-socfpga.git
branch is socfpga-5.4.64-lts

Signed-off-by: Richard Gong <richard.gong@intel.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
Integrated-by: Jun Zhang <jun.zhang@windriver.com>
---
 drivers/crypto/intel_fcs.c | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

diff --git a/drivers/crypto/intel_fcs.c b/drivers/crypto/intel_fcs.c
index 56574d74ce93..7372c31c0ae0 100644
--- a/drivers/crypto/intel_fcs.c
+++ b/drivers/crypto/intel_fcs.c
@@ -104,16 +104,13 @@ static int fcs_request_service(struct intel_fcs_priv *priv,
 	if (ret)
 		return -EINVAL;
 
-	ret = wait_for_completion_interruptible_timeout(&priv->completion,
+	ret = wait_for_completion_timeout(&priv->completion,
 							timeout);
 	if (!ret) {
 		dev_err(priv->client.dev,
 			"timeout waiting for SMC call\n");
 		ret = -ETIMEDOUT;
-	} else if (ret < 0)
-		dev_err(priv->client.dev,
-			"interrupted while waiting for SMC call\n");
-	else
+	} else
 		ret = 0;
 
 	mutex_unlock(&priv->lock);
-- 
2.26.1

