From 1ef7ec10f3011d8fc66cb2860b9bc65c6b53a9c8 Mon Sep 17 00:00:00 2001
From: Wen He <wen.he_1@nxp.com>
Date: Thu, 29 Aug 2019 16:48:20 +0800
Subject: [PATCH 582/741] drm/imx/hdp: ls1028a: Correction the connecter type

commit 51385a70fb06135ddeff243c2ae11efe97266a1b from
http://source.codeaurora.org/external/qoriq/qoriq-components/linux

This patch correction the connecter type HDMI to DP.

Signed-off-by: Wen He <wen.he_1@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 drivers/gpu/drm/imx/hdp/imx-hdp.c | 3 ++-
 drivers/gpu/drm/imx/hdp/imx-hdp.h | 1 +
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/drivers/gpu/drm/imx/hdp/imx-hdp.c b/drivers/gpu/drm/imx/hdp/imx-hdp.c
index 245052bb1b37..f41a29c8d2d9 100644
--- a/drivers/gpu/drm/imx/hdp/imx-hdp.c
+++ b/drivers/gpu/drm/imx/hdp/imx-hdp.c
@@ -1244,6 +1244,7 @@ static struct hdp_ops ls1028a_dp_ops = {
 static struct hdp_devtype ls1028a_dp_devtype = {
 	.ops = &ls1028a_dp_ops,
 	.rw = &ls1028a_rw,
+	.connector_type = DRM_MODE_CONNECTOR_DisplayPort,
 };
 static const struct of_device_id imx_hdp_dt_ids[] = {
 	{ .compatible = "fsl,imx8qm-hdmi", .data = &imx8qm_hdmi_devtype},
@@ -1613,7 +1614,7 @@ static int imx_hdp_imx_bind(struct device *dev, struct device *master,
 
 	drm_connector_init(drm, connector,
 			   &imx_hdp_connector_funcs,
-			   DRM_MODE_CONNECTOR_HDMIA);
+			   devtype->connector_type);
 
 	drm_connector_attach_encoder(connector, encoder);
 
diff --git a/drivers/gpu/drm/imx/hdp/imx-hdp.h b/drivers/gpu/drm/imx/hdp/imx-hdp.h
index 7364b310928c..3b27319a270c 100644
--- a/drivers/gpu/drm/imx/hdp/imx-hdp.h
+++ b/drivers/gpu/drm/imx/hdp/imx-hdp.h
@@ -124,6 +124,7 @@ struct hdp_ops {
 struct hdp_devtype {
 	struct hdp_ops *ops;
 	struct hdp_rw_func *rw;
+	u32 connector_type;
 };
 
 struct hdp_video {
-- 
2.17.1

