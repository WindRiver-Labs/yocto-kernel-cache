From ed7addbfaf3d57e7c77471d4a371649de9bd6310 Mon Sep 17 00:00:00 2001
From: Xiaoliang Yang <xiaoliang.yang_1@nxp.com>
Date: Tue, 24 Sep 2019 07:34:26 +0800
Subject: [PATCH 669/741] TSN: modify DSCP attribute type of netlink

commit 62eec6271e2f95135b39c57af177a7b20cb018d7 from
http://source.codeaurora.org/external/qoriq/qoriq-components/linux

DSCP attribute type of netlink is inconsistency with DSCP structure,
which can cause an invalid length of attribute type.

Signed-off-by: Xiaoliang Yang <xiaoliang.yang_1@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 net/tsn/genl_tsn.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/net/tsn/genl_tsn.c b/net/tsn/genl_tsn.c
index 96b2bdd29fab..762d945ca7fc 100644
--- a/net/tsn/genl_tsn.c
+++ b/net/tsn/genl_tsn.c
@@ -235,8 +235,8 @@ static const struct nla_policy qci_fmi_policy[] = {
 static const struct nla_policy dscp_policy[] = {
 	[TSN_DSCP_ATTR_INDEX]		= { .type = NLA_U32},
 	[TSN_DSCP_ATTR_DISABLE]		= { .type = NLA_FLAG},
-	[TSN_DSCP_ATTR_COS]		= { .type = NLA_U32},
-	[TSN_DSCP_ATTR_DPL]		= { .type = NLA_U32},
+	[TSN_DSCP_ATTR_COS]		= { .type = NLA_U8},
+	[TSN_DSCP_ATTR_DPL]		= { .type = NLA_U8},
 };
 
 static ATOMIC_NOTIFIER_HEAD(tsn_notif_chain);
-- 
2.17.1

