From d64ab146248ec06d9a295f057b63f173a81b2329 Mon Sep 17 00:00:00 2001
From: Camelia Groza <camelia.groza@nxp.com>
Date: Mon, 4 Sep 2017 14:35:21 +0300
Subject: [PATCH 163/741] sdk_dpaa: ls1043a errata: fix arm32 build

commit 5bc6c6145e33811df2c292aa509a3f650fdcfb59 from
http://source.codeaurora.org/external/qoriq/qoriq-components/linux

Signed-off-by: Camelia Groza <camelia.groza@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth.h    | 6 ++----
 drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth_sg.c | 2 +-
 2 files changed, 3 insertions(+), 5 deletions(-)

diff --git a/drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth.h b/drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth.h
index d2ce6e68bcd3..b1703bc141a7 100644
--- a/drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth.h
+++ b/drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth.h
@@ -689,12 +689,10 @@ static inline void _dpa_bp_free_pf(void *addr)
 
 #ifndef CONFIG_PPC
 extern bool dpaa_errata_a010022; /* SoC affected by A010022 errata */
-
 #define NONREC_MARK	0x01
 #define HAS_DMA_ISSUE(start, size) \
-	(((u64)(start) + (size)) > (((u64)(start) + 0x1000) & ~0xFFF))
-#define BOUNDARY_4K(start, size) (((u64)(start) + (u64)(size)) & ~0xFFF)
-
+	(((uintptr_t)(start) + (size)) > \
+	 (((uintptr_t)(start) + 0x1000) & ~0xFFF))
 #endif  /* !CONFIG_PPC */
 
 #endif	/* __DPA_H */
diff --git a/drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth_sg.c b/drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth_sg.c
index c0e57da59eab..f89a60bcc204 100644
--- a/drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth_sg.c
+++ b/drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth_sg.c
@@ -757,7 +757,7 @@ static bool a010022_check_skb(struct sk_buff *skb, struct dpa_priv_s *priv)
 	skb_frag_t *frag;
 
 	/* Check if the headroom is aligned */
-	if (((u16)skb->data - priv->tx_headroom) %
+	if (((uintptr_t)skb->data - priv->tx_headroom) %
 	    priv->buf_layout[TX].data_align != 0)
 		return true;
 
-- 
2.17.1

