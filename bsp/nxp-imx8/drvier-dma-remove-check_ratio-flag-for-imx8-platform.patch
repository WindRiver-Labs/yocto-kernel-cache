From addc648eeb65b8c6f10e3d071615816bd6a0a71c Mon Sep 17 00:00:00 2001
From: MengLi <meng.li@windriver.com>
Date: Wed, 15 Apr 2020 14:41:39 +0800
Subject: [PATCH 22/22] drvier: dma: remove check_ratio flag for imx8 platform
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

The variable check_ratio is involed by upstream commit
941acd566b18("dmaengine: imx-sdma: Only check ratio
on parts that support 1:1 "), but it causes dma doesnâ€™t work
well and affect audio feature. So, refer sdk commit
22e80e78548a("MLK-16104-1 dma: imx-sdma: add i.mx8m
for multi sdma devices "), remove it from imx8 platform.

Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/dma/imx-sdma.c | 1 -
 1 file changed, 1 deletion(-)

diff --git a/drivers/dma/imx-sdma.c b/drivers/dma/imx-sdma.c
index ab75ed38f5ef..82be2c085b41 100644
--- a/drivers/dma/imx-sdma.c
+++ b/drivers/dma/imx-sdma.c
@@ -619,7 +619,6 @@ static struct sdma_driver_data sdma_imx8mq = {
 	.chnenbl0 = SDMA_CHNENBL0_IMX35,
 	.num_events = 48,
 	.script_addrs = &sdma_script_imx7d,
-	.check_ratio = 1,
 };
 
 static const struct platform_device_id sdma_devtypes[] = {
-- 
2.17.1

