From a013d6228178127bf786c5c98e25348b28442550 Mon Sep 17 00:00:00 2001
From: Zhang Ying-22455 <ying.zhang22455@nxp.com>
Date: Thu, 6 Dec 2018 13:37:49 +0800
Subject: [PATCH 733/767] armv8: lx2160a: flextimer: add flextimer support

Signed-off-by: Zhang Ying-22455 <ying.zhang22455@nxp.com>
[Xulin: Original patch taken from NXP LSDK-18.12.]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 drivers/soc/fsl/layerscape/ftm_alarm.c | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/drivers/soc/fsl/layerscape/ftm_alarm.c b/drivers/soc/fsl/layerscape/ftm_alarm.c
index ba590edb42e8..5d646f69b3bc 100644
--- a/drivers/soc/fsl/layerscape/ftm_alarm.c
+++ b/drivers/soc/fsl/layerscape/ftm_alarm.c
@@ -85,6 +85,11 @@ static struct rcpm_cfg ls208xa_rcpm_cfg = {
 	.flextimer_set_bit = 0x4000,
 };
 
+static struct rcpm_cfg lx2160a_rcpm_cfg = {
+	.big_endian = LITTLE_ENDIAN,
+	.flextimer_set_bit = 0x4000,
+};
+
 static const struct of_device_id ippdexpcr_of_match[] = {
 	{ .compatible = "fsl,ls1012a-ftm-alarm", .data = &ls1012a_rcpm_cfg},
 	{ .compatible = "fsl,ls1021a-ftm-alarm", .data = &ls1021a_rcpm_cfg},
@@ -92,6 +97,7 @@ static const struct of_device_id ippdexpcr_of_match[] = {
 	{ .compatible = "fsl,ls1046a-ftm-alarm", .data = &ls1046a_rcpm_cfg},
 	{ .compatible = "fsl,ls1088a-ftm-alarm", .data = &ls1088a_rcpm_cfg},
 	{ .compatible = "fsl,ls208xa-ftm-alarm", .data = &ls208xa_rcpm_cfg},
+	{ .compatible = "fsl,lx2160a-ftm-alarm", .data = &lx2160a_rcpm_cfg},
 	{},
 };
 MODULE_DEVICE_TABLE(of, ippdexpcr_of_match);
@@ -355,6 +361,7 @@ static const struct of_device_id ftm_alarm_match[] = {
 	{ .compatible = "fsl,ls1046a-ftm-alarm", },
 	{ .compatible = "fsl,ls1088a-ftm-alarm", },
 	{ .compatible = "fsl,ls208xa-ftm-alarm", },
+	{ .compatible = "fsl,lx2160a-ftm-alarm", },
 	{ .compatible = "fsl,ftm-timer", },
 	{ },
 };
-- 
2.17.0

