From 2e3fb6f5f394487c4dbfa9829592a161064b7214 Mon Sep 17 00:00:00 2001
From: Uri Eliyahu <uriel@marvell.com>
Date: Tue, 24 May 2016 12:37:42 +0300
Subject: [PATCH 0248/1345] pp3: fix channel message receive

commit  34871f0d354621d7b7a61cfb08ab14c6ae839675 from
https://github.com/MarvellEmbeddedProcessors/linux-marvell.git

Change-Id: I69ce9fb6764a6e80ceca95343d5a1fe990e65e83
Signed-off-by: Uri Eliyahu <uriel@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/29919
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Lior Amsalem <alior@marvell.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 .../net/ethernet/marvell/pp3/msg/mv_pp3_msg_chan.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/marvell/pp3/msg/mv_pp3_msg_chan.c b/drivers/net/ethernet/marvell/pp3/msg/mv_pp3_msg_chan.c
index afc3b78..ec501f6 100644
--- a/drivers/net/ethernet/marvell/pp3/msg/mv_pp3_msg_chan.c
+++ b/drivers/net/ethernet/marvell/pp3/msg/mv_pp3_msg_chan.c
@@ -466,7 +466,7 @@ static void mv_pp3_chan_rx_event(struct mv_pp3_channel *chan)
 			/* get msg from HMAC RX queue */
 			cfh_ptr = (struct host_msg *)
 				mv_pp3_hmac_rxq_next_cfh(chan->frame, chan->hmac_sw_rxq, &cfh_size);
-			if ((cfh_size == 0) || (cfh_size > MV_PP3_CFH_MAX_SIZE) || (cfh_size > proc_dg)) {
+			if ((cfh_size == 0) || (cfh_size > MV_PP3_CFH_MAX_SIZE)) {
 				chan->ch_stat.msg_rx_err++;
 				pr_err("%s: error CFH with wrong size %d received on channel %d (%d). Frame %d, queue %d.",
 					__func__, cfh_size, chan->id, dg_num, chan->frame, chan->hmac_sw_rxq);
-- 
1.7.9.5

